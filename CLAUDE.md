# Claude作業指示書

## 概要
このドキュメントは、Claudeと協働して開発作業を行う際の標準手順と記録方法を定義します。

## 作業記録の作成タイミング

以下のような主要な変更を行った場合は、必ず作業記録を作成してください：

1. **データベーススキーマの変更**
   - テーブルの追加・削除・変更
   - カラムの追加・削除・変更
   - インデックスや制約の変更

2. **大規模なリファクタリング**
   - 複数ファイルにまたがる変更
   - アーキテクチャの変更
   - 命名規則の統一

3. **新機能の実装**
   - 新しいモデル、ビュー、ViewModelの追加
   - 新しいサービスやユーティリティの追加
   - UIの大幅な変更

4. **バグ修正**
   - 複雑なバグの調査と修正
   - 複数のファイルに影響する修正

5. **データ移行**
   - 既存データの構造変更
   - データの正規化
   - レガシーデータの移行

## 作業記録の作成手順

### 1. チャット履歴ファイルの作成

```
ファイル名: docs/chat-history-[作業内容]-[日付].md
例: docs/chat-history-finishids-migration-20250801.md
```

**含めるべき内容：**
- 作業日付
- 作業概要
- 作業内容の詳細
  - 初期の問題・要求
  - 実施した変更
  - 発生したエラーと解決方法
  - 技術的な注意点
- 最終状態

### 2. Wiki用要約ファイルの作成

```
ファイル名: docs/wiki-[作業内容].md
例: docs/wiki-finishids-migration.md
```

**含めるべき内容：**
- 概要（1-2段落）
- 変更内容
  - 新規作成ファイル
  - 更新ファイル
  - 削除ファイル
- 主な変更点（箇条書き）
- テーブル構造（データベース変更の場合）
- メリット・改善点

### 3. Gitコミット

```bash
# ドキュメントを含めてコミット
git add [変更ファイル] docs/chat-history-*.md docs/wiki-*.md
git commit -m "[作業内容の要約]

- [主要な変更点1]
- [主要な変更点2]
- [主要な変更点3]"

# GitHubにプッシュ
git push origin [ブランチ名]
```

## テンプレート

### チャット履歴テンプレート

```markdown
# [作業内容] チャット履歴

## 日付: YYYY-MM-DD

## 概要
[1-2文で作業の概要を記載]

## 作業内容

### 1. [作業項目1]
- **問題/要求**: 
- **解決/実装**: 

### 2. [作業項目2]
- **問題/要求**: 
- **解決/実装**: 

## 技術的な注意点
- [注意点1]
- [注意点2]

## 最終状態
- [最終状態の説明]
```

### Wiki要約テンプレート

```markdown
# [作業内容]

## 概要
[変更の概要を1-2段落で記載]

## 変更内容

### 新規作成ファイル
- `path/to/file1` - [説明]
- `path/to/file2` - [説明]

### 更新ファイル
- `path/to/file3` - [変更内容]
- `path/to/file4` - [変更内容]

### 削除ファイル
- `path/to/file5` - [削除理由]

## 主な変更点
1. **[カテゴリ1]**
   - [詳細]
   
2. **[カテゴリ2]**
   - [詳細]

## メリット
- [メリット1]
- [メリット2]
```

## Claudeへの指示

作業完了時に以下を実行してください：

1. **ユーザーに確認**: 「この作業の記録を作成しますか？」
2. **ユーザーが承認した場合**:
   - チャット履歴ファイルを作成
   - Wiki用要約ファイルを作成
   - Gitにコミット
   - GitHubにプッシュ
3. **ユーザーに通知**: 作成したファイルのパスとGitHub Wikiへの掲載方法

## 注意事項

- センシティブな情報（パスワード、APIキー等）は記録に含めない
- エラーメッセージは必要な部分のみ抜粋する
- コード例は最小限の再現可能なものにする
- 日本語で記述する（技術用語は英語可）